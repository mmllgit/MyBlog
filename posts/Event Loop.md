---
title: Event Loop
excerpt: Event Loop
image: head.jpg
date: "2022-9-6"
isFeatured: false
---

### Event Loop

#### 进程与线程

进程：指在系统中正在运行的一个应用程序；程序一旦运行就是进程；进程——资源分配的最小单位。

线程：系统分配处理器时间资源的基本单元，或者说进程之内独立执行的一个单元执行流。线程——程序执行的最小单位。

1. 进程要分配一大部分的内存，而线程只需要分配一部分栈就可以了。
2. 一个程序至少有一个进程,一个进程至少有一个线程.。
3. 进程是资源分配的最小单位，线程是程序执行的最小单位。
4. 一个线程可以创建和撤销另一个线程，同一个进程中的多个线程之间可以并发执行。

### 事件触发三阶段

事件触发有三个阶段：

- window往事件触发处传播，遇到注册的捕获事件会触发
- 传播到事件触发处时触发注册的事件
- 从事件触发处往 `window` 传播，遇到注册的冒泡事件会触发

事件触发一般来说会按照上面的顺序进行，但是也有特例，如果给一个 `body` 中的子节点同时注册冒泡和捕获事件，事件触发会按照注册的顺序执行。

#### 事件委托

#### 优点：

1. 减少事件注册，节省内存。比如，
   - 在table上代理所有td的click事件。
   - 在ul上代理所有li的click事件。
2. 简化了dom节点更新时，相应事件的更新。比如
   - 不用在新添加的li上绑定click事件。
   - 当删除某个li时，不用移解绑上面的click事件。

#### 缺点：

1. 事件委托基于冒泡，对于不冒泡的事件不支持。
2. 层级过多，冒泡过程中，可能会被某层阻止掉。
3. 理论上委托会导致浏览器频繁调用处理函数，虽然很可能不需要处理。所以建议就近委托，比如在table上代理td，而不是在document上代理td。
4. 把所有事件都用代理就可能会出现事件误判。比如，在document中代理了所有button的click事件，另外的人在引用改js时，可能不知道，造成单击button触发了两个click事件。